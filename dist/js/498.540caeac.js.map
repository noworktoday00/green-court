{"version":3,"file":"js/498.540caeac.js","mappings":"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","sources":["webpack://green-court/./src/views/frontPage/CartView.vue","webpack://green-court/./src/views/frontPage/CartView.vue?7cc3"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\" />\n  <div class=\"gradient-bg\">\n    <div class=\"container\">\n      <div class=\"row row-cols-md-2\">\n        <div class=\"col col-12\">\n          <table class=\"table align-middle text-white my-48\">\n            <thead>\n              <tr>\n                <th>品名</th>\n                <th style=\"width: 120px\">數量</th>\n                <th>單價</th>\n                <th>總計</th>\n                <th>刪除產品</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-if=\"carts\">\n                <tr v-for=\"item in carts.carts\" :key=\"item.id\">\n                  <td> {{ item.product.title }}\n                    <h6 class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</h6>\n                  </td>\n                  <td>\n                    <label for=\"item-qty\" class=\"d-none\">數量</label>\n                    <div class=\"input-group input-group-sm\">\n                      <input\n                      type=\"number\"\n                      id=\"item-qty\"\n                      class=\"form-control\"\n                      min=\"1\"\n                      v-model.number=\"item.qty\"\n                      :disabled=\"status.loadingItem === item.id\"\n                      @change=\"changeQty(item)\">\n                      <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                        </div>\n                  </td>\n                  <td>\n                    {{ $filters.currency(item.product.price) }}\n                  </td>\n                  <td>\n                    <small v-if=\"final_total !== total\" class=\"text-success\">折扣價</small>\n                    <br>\n                    {{ $filters.currency(item.final_total) }}\n                  </td>\n                  <td>\n                    <button\n                    class=\"btn btn-outline-white p-8\"\n                    @click=\"removeCartItem(item.id)\">\n                      <i class=\"bi bi-trash3\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"4\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ $filters.currency(carts.total) }}</td>\n              </tr>\n              <tr>\n                <td colspan=\"4\" class=\"text-end\">折扣價</td>\n                <td class=\"text-end\"> {{ $filters.currency(carts.final_total) }} </td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class=\"pb-48\">\n            <label for=\"coupon-input\" class=\"d-none\">請輸入優惠碼</label>\n            <div class=\"input-group input-group-sm text-white\">\n              <input\n              type=\"text\"\n              id=\"coupon-input\"\n              class=\"form-control rounded\"\n              v-model=\"coupon_code\"\n              placeholder=\"請輸入優惠碼\">\n              <div class=\"input-group-append\">\n                <button\n                class=\"btn btn-outline-light ms-8\"\n                type=\"button\"\n                @click=\"addCoupon()\">\n                  套用優惠碼\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col col-12\">\n          <Form @submit=\"createOrder\" class=\"my-48 text-white\" v-slot=\"{ errors }\">\n            <div class=\"mb-16\">\n              <label for=\"name\" class=\"form-label\">訂購人姓名</label>\n                <Field type=\"text\" id=\"name\" name=\"姓名\" class=\"form-control\"\n                       placeholder=\"請輸入您的姓名\" v-model=\"form.user.name\"\n                       :class=\"{ 'is-invalid': errors['姓名'] }\"\n                       rules=\"required\" />\n                <ErrorMessage name=\"姓名\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"mb-16\">\n              <label for=\"email\" class=\"form-label\">電子信箱</label>\n                <Field type=\"email\" id=\"email\" name=\"email\" class=\"form-control\"\n                       placeholder=\"請輸入您的 e-mail\" v-model=\"form.user.email\"\n                       :class=\"{ 'is-invalid': errors['email']}\"\n                       rules=\"email|required\" />\n                <ErrorMessage name=\"email\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"mb-16\">\n              <label for=\"tel\" class=\"form-label\">聯絡電話</label>\n                <Field type=\"tel\" id=\"tel\" name=\"電話\" class=\"form-control\"\n                       placeholder=\"請輸入您的聯絡電話\" v-model=\"form.user.tel\"\n                       :class=\"{'is-invalid': errors['電話']}\"\n                       rules=\"required\" />\n                <ErrorMessage name=\"電話\" class=\"invalid-feedback\"/>\n            </div>\n            <div class=\"mb-16\">\n              <label for=\"address\" class=\"form-label\">聯絡地址</label>\n                <Field type=\"text\" id=\"address\" name=\"地址\" class=\"form-control\"\n                       placeholder=\"請輸入您的聯絡地址\" v-model=\"form.user.address\"\n                       :class=\"{'is-invalid':errors['地址']}\"\n                       rules=\"required\" />\n                <ErrorMessage name=\"地址\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"mb-24\">\n              <label for=\"message\" class=\"form-label\">留言</label>\n                <textarea class=\"form-control\"\n                          id=\"message\"\n                          cols=\"30\"\n                          rows=\"7\"\n                          v-model=\"form.message\">\n                </textarea>\n            </div>\n            <div class=\"text-end\">\n              <button class=\"btn btn-outline-light\">送出訂單</button>\n            </div>\n          </Form>\n        </div>\n      </div>\n  </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: {},\n      final_total: '',\n      total: '',\n      coupon_code: '',\n      isLoading: false,\n      status: {\n        loadingItem: '',\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.carts = res.data.data;\n          console.log(this.carts);\n          this.final_total = res.data.data.final_total;\n          this.total = res.data.data.total;\n        });\n    },\n    removeCartItem(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(url)\n        .then((res) => {\n          // console.log(res);\n          this.$httpMessageState(res, '刪除品項');\n          this.getCart();\n        });\n    },\n    changeQty(item) {\n      // console.log(item);\n      this.status.loadingItem = item.id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cartInfo = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      // console.log(cartInfo);\n      this.$http.put(url, { data: cartInfo })\n        .then((res) => {\n          this.status.loadingItem = '';\n          this.$httpMessageState(res, '更新數量');\n          this.getCart();\n        });\n    },\n    addCoupon() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          this.getCart();\n          this.isLoading = false;\n          this.$httpMessageState(res, '使用優惠券');\n        });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const orderForm = this.form;\n      this.isLoading = true;\n      this.$http.post(url, { data: orderForm })\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n          this.isLoading = false;\n          this.$httpMessageState(res, '建立訂單');\n          this.$router.push(`/order/${res.data.orderId}`);\n        });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=fb365ab2\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/vanmoritz/Desktop/project/green-court/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","for","_hoisted_15","colspan","_createVNode","_component_Loading","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementBlock","_Fragment","key","carts","item","id","product","title","coupon","_hoisted_7","_hoisted_8","_hoisted_9","type","min","qty","disabled","loadingItem","onChange","$options","_hoisted_11","unit","_ctx","currency","price","_hoisted_12","_hoisted_13","final_total","onClick","_hoisted_17","_hoisted_18","total","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","placeholder","_hoisted_24","_hoisted_25","_component_Form","onSubmit","errors","_hoisted_26","_hoisted_27","_component_Field","name","user","rules","_component_ErrorMessage","_hoisted_28","_hoisted_29","email","_hoisted_30","_hoisted_31","tel","_hoisted_32","_hoisted_33","address","_hoisted_34","_hoisted_35","cols","rows","message","_hoisted_36","data","coupon_code","isLoading","status","form","methods","getCart","url","this","$http","get","then","res","console","log","removeCartItem","delete","$httpMessageState","changeQty","cartInfo","product_id","put","addCoupon","code","post","createOrder","orderForm","$router","push","orderId","created","__exports__","render"],"sourceRoot":""}