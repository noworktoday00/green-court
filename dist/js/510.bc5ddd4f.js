"use strict";(self["webpackChunkgreen_court"]=self["webpackChunkgreen_court"]||[]).push([[510],{4510:function(e,t,l){l.r(t),l.d(t,{default:function(){return tt}});var o=l(3396),a=l(7139);const s={class:"gradient-bg"},r={class:"text-end"},i={class:"table mt-4 text-white"},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{width:"120"},"分類"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",{width:"120"},"原價"),(0,o._)("th",{width:"120"},"售價"),(0,o._)("th",{width:"100"},"是否啟用"),(0,o._)("th",{width:"200"},"編輯")])],-1),c={class:"text-right"},d={class:"text-right"},p={key:0,class:"text-light"},u={key:1,class:"text-warning"},m={class:"btn-group"},_=["onClick"],h=["onClick"],b={class:"row align-item-center"};function g(e,t,l,g,f,v){const P=(0,o.up)("Loading"),w=(0,o.up)("PaginationComponent"),y=(0,o.up)("ProductModal"),x=(0,o.up)("DeleteModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(P,{active:f.isLoading},null,8,["active"]),(0,o._)("div",s,[(0,o._)("div",r,[(0,o._)("button",{class:"btn btn-outline-light",type:"button",onClick:t[0]||(t[0]=e=>v.openModal(!0))},"增加一個產品")]),(0,o._)("table",i,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,a.zw)(t.category),1),(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",c,(0,a.zw)(e.$filters.currency(t.origin_price)),1),(0,o._)("td",d,(0,a.zw)(e.$filters.currency(t.price)),1),(0,o._)("td",null,[t.is_enabled?((0,o.wg)(),(0,o.iD)("span",p,"啟用")):((0,o.wg)(),(0,o.iD)("span",u,"未啟用"))]),(0,o._)("td",null,[(0,o._)("div",m,[(0,o._)("button",{class:"btn btn-outline-light btn-sm",onClick:e=>v.openModal(!1,t)},"編輯",8,_),(0,o._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>v.openDeleteModal(t)},"刪除",8,h)])])])))),128))])]),(0,o._)("div",b,[(0,o.Wm)(w,{pages:f.pagination,onEmitPage:v.getProducts},null,8,["pages","onEmitPage"])])]),(0,o.Wm)(y,{ref:"productModal",product:f.tempProduct,onUpdateProduct:v.updateProduct},null,8,["product","onUpdateProduct"]),(0,o.Wm)(x,{ref:"deleteModal",product:f.tempProduct,onDeleteItem:v.deleteProduct},null,8,["product","onDeleteItem"])],64)}var f=l(9242);const v={class:"modal modal-xl fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},P={class:"modal-dialog"},w={class:"modal-content"},y=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,o._)("span",null,"新增產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),x={class:"modal-body"},k={class:"row"},M={class:"col-sm-4"},U={class:"mb-3"},C=(0,o._)("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),D=["src"],V={class:"mb-3"},$=(0,o._)("label",{for:"customFile",class:"form-label",htmlFor:""},[(0,o.Uk)("或 上傳圖片 "),(0,o._)("i",{class:"fas fa-spinner fa-spin"})],-1),F={class:"col-sm-8"},L={class:"row gx-2"},z={class:"mb-16 col-md-6"},Z=(0,o._)("label",{for:"title",class:"form-label"},"標題",-1),I={class:"mb-16 col-md-6"},N=(0,o._)("label",{for:"category",class:"form-label"},"分類",-1),W=(0,o._)("option",{value:"臨打團"},"臨打團",-1),j=(0,o._)("option",{value:"教練課"},"教練課",-1),E=(0,o._)("option",{value:"羽球拍"},"羽球拍",-1),H=[W,j,E],Y=(0,o._)("hr",null,null,-1),K={class:"row gx-2"},S={class:"mb-16 col-md-6"},O=(0,o._)("label",{for:"date",class:"form-label"},"日期",-1),q={class:"mb-16 col-md-6"},A=(0,o._)("label",{class:"form-label",for:"time"},"時間",-1),B=(0,o._)("hr",null,null,-1),G={class:"row gx-2"},J={class:"mb-16 col-md-6"},Q=(0,o._)("label",{class:"form-label",for:"location"},"地點",-1),R={class:"mb-16 col-md-6"},T=(0,o._)("label",{class:"form-label",for:"map"},"地圖",-1),X=(0,o._)("hr",null,null,-1),ee={class:"row gx-2"},te={class:"mb-16 col-md-6"},le=(0,o._)("label",{class:"form-label",for:"unit"},"單位",-1),oe={class:"mb-16 col-md-6"},ae=(0,o._)("label",{class:"form-label",for:"hours"},"時數",-1),se=(0,o._)("hr",null,null,-1),re={class:"row gx-2"},ie={class:"mb-16 col-md-6"},ne=(0,o._)("label",{class:"form-label",for:"court"},"場地數",-1),ce={class:"mb-16 col-md-6"},de=(0,o._)("label",{class:"form-label",for:"members"},"名額",-1),pe=(0,o._)("hr",null,null,-1),ue={class:"row gx-2"},me={class:"mb-16 col-md-6"},_e=(0,o._)("label",{class:"form-label",for:"experience"},"年資",-1),he={class:"mb-16 col-md-6"},be=(0,o._)("label",{for:"level",class:"form-label"},"等級",-1),ge=(0,o.uE)('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option>',15),fe=[ge],ve=(0,o._)("hr",null,null,-1),Pe={class:"row gx-2"},we={class:"mb-16 col-md-6"},ye=(0,o._)("label",{for:"origin_price",class:"form-label"},"原價",-1),xe={class:"mb-16 col-md-6"},ke=(0,o._)("label",{for:"price",class:"form-label"},"售價",-1),Me=(0,o._)("hr",null,null,-1),Ue={class:"mb-16"},Ce=(0,o._)("label",{for:"description",class:"form-label"},"產品描述",-1),De={class:"mb-16"},Ve=(0,o._)("label",{for:"content",class:"form-label"},"說明內容",-1),$e={class:"mb-16"},Fe={class:"form-check"},Le=(0,o._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),ze={class:"modal-footer"},Ze=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close",-1);function Ie(e,t,l,a,s,r){return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("div",P,[(0,o._)("div",w,[y,(0,o._)("div",x,[(0,o._)("div",k,[(0,o._)("div",M,[(0,o._)("div",U,[C,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[0]||(t[0]=e=>s.tempProduct.imageUrl=e)},null,512),[[f.nr,s.tempProduct.imageUrl]]),(0,o._)("img",{src:s.tempProduct.imageUrl,class:"img-fluid mt-8",alt:""},null,8,D)]),(0,o._)("div",V,[$,(0,o._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[1]||(t[1]=(...e)=>r.uploadFile&&r.uploadFile(...e))},null,544)])]),(0,o._)("div",F,[(0,o._)("div",L,[(0,o._)("div",z,[Z,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":t[2]||(t[2]=e=>s.tempProduct.title=e)},null,512),[[f.nr,s.tempProduct.title]])]),(0,o._)("div",I,[N,(0,o.wy)((0,o._)("select",{class:"form-select",id:"category","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>s.tempProduct.category=e)},H,512),[[f.bM,s.tempProduct.category]])])]),Y,(0,o._)("div",K,[(0,o._)("div",S,[O,(0,o.wy)((0,o._)("input",{type:"date",class:"form-control",id:"date",placeholder:"請輸入日期","onUpdate:modelValue":t[4]||(t[4]=e=>s.tempProduct.date=e)},null,512),[[f.nr,s.tempProduct.date]])]),(0,o._)("div",q,[A,(0,o.wy)((0,o._)("input",{type:"time",class:"form-control",id:"time",placeholder:"請輸入時間","onUpdate:modelValue":t[5]||(t[5]=e=>s.tempProduct.time=e)},null,512),[[f.nr,s.tempProduct.time]])])]),B,(0,o._)("div",G,[(0,o._)("div",J,[Q,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"location",placeholder:"請輸入地點","onUpdate:modelValue":t[6]||(t[6]=e=>s.tempProduct.location=e)},null,512),[[f.nr,s.tempProduct.location]])]),(0,o._)("div",R,[T,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"map",placeholder:"請輸入 src","onUpdate:modelValue":t[7]||(t[7]=e=>s.tempProduct.iframe=e)},null,512),[[f.nr,s.tempProduct.iframe]])])]),X,(0,o._)("div",ee,[(0,o._)("div",te,[le,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":t[8]||(t[8]=e=>s.tempProduct.unit=e)},null,512),[[f.nr,s.tempProduct.unit]])]),(0,o._)("div",oe,[ae,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"hours",min:"1",placeholder:"請輸入時數","onUpdate:modelValue":t[9]||(t[9]=e=>s.tempProduct.hours=e)},null,512),[[f.nr,s.tempProduct.hours]])])]),se,(0,o._)("div",re,[(0,o._)("div",ie,[ne,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"court",min:"1",placeholder:"請輸入場地數","onUpdate:modelValue":t[10]||(t[10]=e=>s.tempProduct.court=e)},null,512),[[f.nr,s.tempProduct.court]])]),(0,o._)("div",ce,[de,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"members",min:"1",placeholder:"請輸入名額","onUpdate:modelValue":t[11]||(t[11]=e=>s.tempProduct.members=e)},null,512),[[f.nr,s.tempProduct.members]])])]),pe,(0,o._)("div",ue,[(0,o._)("div",me,[_e,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"experience",placeholder:"請輸入年資","onUpdate:modelValue":t[12]||(t[12]=e=>s.tempProduct.experience=e)},null,512),[[f.nr,s.tempProduct.experience]])]),(0,o._)("div",he,[be,(0,o.wy)((0,o._)("select",{class:"form-select",id:"level","aria-label":"Default select example","onUpdate:modelValue":t[13]||(t[13]=e=>s.tempProduct.level=e)},fe,512),[[f.bM,s.tempProduct.level,void 0,{number:!0}]])])]),ve,(0,o._)("div",Pe,[(0,o._)("div",we,[ye,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":t[14]||(t[14]=e=>s.tempProduct.origin_price=e)},null,512),[[f.nr,s.tempProduct.origin_price,void 0,{number:!0}]])]),(0,o._)("div",xe,[ke,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":t[15]||(t[15]=e=>s.tempProduct.price=e)},null,512),[[f.nr,s.tempProduct.price,void 0,{number:!0}]])])]),Me,(0,o._)("div",Ue,[Ce,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":t[16]||(t[16]=e=>s.tempProduct.description=e)},null,512),[[f.nr,s.tempProduct.description]])]),(0,o._)("div",De,[Ve,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容","onUpdate:modelValue":t[17]||(t[17]=e=>s.tempProduct.content=e)},null,512),[[f.nr,s.tempProduct.content]])]),(0,o._)("div",$e,[(0,o._)("div",Fe,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[18]||(t[18]=e=>s.tempProduct.is_enabled=e)},null,512),[[f.e8,s.tempProduct.is_enabled]]),Le])])])])]),(0,o._)("div",ze,[Ze,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[19]||(t[19]=t=>e.$emit("update-product",s.tempProduct))},"確定新增")])])])],512)}var Ne=l(1339),We={data(){return{modal:{},tempProduct:{imagesUrl:[]}}},props:{product:{type:Object,default(){return{}}}},watch:{product(){this.tempProduct=this.product}},methods:{uploadFile(){const e=this.$refs.fileInput.files[0],t=new FormData;t.append("file-to-upload",e);const l="https://vue3-course-api.hexschool.io/api/green-court/admin/upload";this.$http.post(l,t).then((e=>{e.data.success&&(this.tempProduct.imageUrl=e.data.imageUrl)}))}},mixins:[Ne.Z]},je=l(89);const Ee=(0,je.Z)(We,[["render",Ie]]);var He=Ee,Ye=l(6915);const Ke={"aria-label":"Page navigation example"},Se={class:"pagination justify-content-center"},Oe=(0,o._)("span",{"aria-hidden":"true"},"«",-1),qe=[Oe],Ae=["onClick"],Be=(0,o._)("span",{"aria-hidden":"true"},"»",-1),Ge=[Be];function Je(e,t,l,s,r,i){return(0,o.wg)(),(0,o.iD)("nav",Ke,[(0,o._)("ul",Se,[(0,o._)("li",{class:(0,a.C_)(["page-item",{disabled:!l.pages.has_pre}])},[(0,o._)("a",{class:"page-link bg-dark text-white",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,f.iM)((e=>i.updatePage(l.pages.current_page-1)),["prevent"]))},qe)],2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.pages.total_pages,(e=>((0,o.wg)(),(0,o.iD)("li",{class:(0,a.C_)(["page-item",{active:e===l.pages.current_page}]),key:e},[(0,o._)("a",{class:"page-link bg-dark text-white",href:"#",onClick:(0,f.iM)((t=>i.updatePage(e)),["prevent"])},(0,a.zw)(e),9,Ae)],2)))),128)),(0,o._)("li",{class:(0,a.C_)(["page-item",{disabled:!l.pages.has_next}])},[(0,o._)("a",{class:"page-link bg-dark text-white",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,f.iM)((e=>i.updatePage(l.pages.current_page+1)),["prevent"]))},Ge)],2)])])}var Qe={props:["pages"],methods:{updatePage(e){this.$emit("emit-page",e)}}};const Re=(0,je.Z)(Qe,[["render",Je]]);var Te=Re,Xe={data(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductModal:He,DeleteModal:Ye.Z,PaginationComponent:Te},inject:["emitter"],methods:{getProducts(e=1){const t=`https://vue3-course-api.hexschool.io/api/green-court/admin/products?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1}))},openModal(e,t){e&&(this.tempProduct={}),e||(this.tempProduct={...t}),this.isNew=e;const l=this.$refs.productModal;l.showModal()},openDeleteModal(e){console.log(e),this.tempProduct={...e};const t=this.$refs.deleteModal;t.showModal()},updateProduct(e){this.tempProduct=e;const t=this.$refs.productModal;let l="https://vue3-course-api.hexschool.io/api/green-court/admin/product",o="post";this.isNew||(l=`https://vue3-course-api.hexschool.io/api/green-court/admin/product/${e.id}`,o="put"),this.$http[o](l,{data:this.tempProduct}).then((e=>{console.log(e),t.hideModal(),e.data.success&&(this.getProducts(),this.$httpMessageState(e,"新增商品"))}))},deleteProduct(){const e=this.$refs.deleteModal,t=`https://vue3-course-api.hexschool.io/api/green-court/admin/product/${this.tempProduct.id}`;this.$http.delete(t).then((t=>{console.log(t),e.hideModal(),t.data.success&&(this.getProducts(),this.$httpMessageState(t,"刪除商品"))}))}},mounted(){this.getProducts()}};const et=(0,je.Z)(Xe,[["render",g]]);var tt=et}}]);
//# sourceMappingURL=510.bc5ddd4f.js.map